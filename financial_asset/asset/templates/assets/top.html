{% extends 'assets/base.html' %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸{% endblock %}</title>
    </head>
    <body>
        {% block content %}
        <p>{{request.user}}ã•ã‚“ã€ãŠä¹…ã—ã¶ã‚Šã§ã™</p>
        <h1>è³‡ç”£ãƒªã‚¹ãƒˆ</h1>
        <a href="{% url 'new_asset' %}">
            <button type="button">æ–°è¦è¿½åŠ </button>
        </a>
        {% if assets %}
        <table>
            <thead>
                <tr>
                    <th>è³‡ç”£å</th>
                    <th>ãƒ†ã‚£ãƒƒã‚«ãƒ¼</th>
                    <th>æ•°é‡</th>
                    <th>ä¾¡æ ¼</th>
                    <th>ç¨®é¡</th>
                    <th>ä¼šç¤¾å</th>
                    <th>è³¼å…¥æ—¥</th>
                    <th>æç›Š</th>
                </tr>
            </thead>
            <tbody>
                {% for asset, profit_loss in assets|zip_lists:profit_loss_list %}
                    <tr>  
                        <td style="text-align: center;">
                            {{ asset.asset_name }}
                        </td>
                        <td>
                            {{ asset.ticker_name }}
                        </td>
                        <td>
                            {{ asset.quantity }}
                        </td>
                        <td style="text-align: right;">
                            {{ asset.price|format_number }}
                        </td>
                        <td>
                            {% if asset.asset_type == "æ—¥æœ¬æ ª" %}
                                <i class="fas fa-flag" style="color: red;"></i> ğŸ‡¯ğŸ‡µ
                            {% elif asset.asset_type == "ç±³å›½æ ª" %}
                                <i class="fas fa-flag-usa" style="color: blue;"></i> ğŸ‡ºğŸ‡¸
                            {% elif asset.asset_type == "æš—å·è³‡ç”£" %}
                                <i class="fab fa-bitcoin" style="color: orange;"></i>
                            {% else %}
                                <i class="fas fa-globe"></i>
                            {% endif %}
                        </td>
                        <td>{{ asset.company_name }}</td>
                        <td style="text-align: right;">
                            {{ asset.buying_date }}
                        </td>
                        <td class="{% if profit_loss > 0 %}green{% else %}red{% endif %} profit_loss">
                            {{ profit_loss|format_number }}
                        </td>
                        <td><a href="{% url 'asset_detail' asset.id %}">è©³ç´°</a></td>
                        <td><a href="{% url 'asset_edit' asset.id %}">ç·¨é›†</a></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <img src="{{ graph }}" alt="Your Asset Price">
        {% else %}
        <p>è³‡ç”£ã¯ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
        {% endif %}
        {% endblock %}
    </body>
</html>